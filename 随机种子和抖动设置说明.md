# éšæœºç§å­å’Œå¯åŠ¨æ—¶é—´æŠ–åŠ¨è®¾ç½®

## ğŸ² å·²å®ç°çš„éšæœºæ€§æœºåˆ¶

### 1. å¤šé‡éšæœºç§å­è®¾ç½®

æ¯æ¬¡è¿è¡Œä½¿ç”¨**3ç§ä¸åŒçš„éšæœºç§å­æ–¹æ³•**:

```tcl
# æ–¹æ³•1: ä¸»éšæœºæ•°ç”Ÿæˆå™¨
set rng [new RNG]
$rng seed 18134           # Run 1: 18134, Run 2: 30479, ...
set defaultRNG $rng

# æ–¹æ³•2: åŒ…ä¸¢å¼ƒéšæœºæ•°ç”Ÿæˆå™¨
set rng2 [new RNG]
$rng2 seed 18245          # seed + 111

# æ–¹æ³•3: ns-randomå‘½ä»¤
ns-random 18134
```

### 2. å¯åŠ¨æ—¶é—´éšæœºæŠ–åŠ¨

æ¯ä¸ªFTPæµä½¿ç”¨**ä¸åŒçš„å¯åŠ¨æ—¶é—´**:

```tcl
# åŸå§‹ (æ‰€æœ‰è¿è¡Œéƒ½ç›¸åŒ)
$ns at 0.0 "$myftp1 start"
$ns at 0.0 "$myftp2 start"

# ä¿®æ”¹å (æ¯æ¬¡è¿è¡Œä¸åŒ)
$ns at 0.234567 "$myftp1 start"    # Run 1
$ns at 0.456789 "$myftp2 start"

$ns at 0.123456 "$myftp1 start"    # Run 2
$ns at 0.345678 "$myftp2 start"

# æŠ–åŠ¨èŒƒå›´: 0-0.5ç§’éšæœº
```

## ğŸ“Š 5æ¬¡è¿è¡Œçš„å…·ä½“é…ç½®

| Run | éšæœºç§å­ | FTP1æŠ–åŠ¨ | FTP2æŠ–åŠ¨ |
|-----|---------|---------|---------|
| 1 | 18134 | 0.0-0.5ç§’ | 0.0-0.5ç§’ |
| 2 | 30479 | 0.0-0.5ç§’ | 0.0-0.5ç§’ |
| 3 | 42824 | 0.0-0.5ç§’ | 0.0-0.5ç§’ |
| 4 | 55169 | 0.0-0.5ç§’ | 0.0-0.5ç§’ |
| 5 | 67514 | 0.0-0.5ç§’ | 0.0-0.5ç§’ |

æ¯æ¬¡è¿è¡Œçš„æŠ–åŠ¨å€¼ç”±ç§å­å†³å®š,ä¿è¯å¯é‡å¤ä½†ä¸åŒã€‚

## ğŸ” å¦‚ä½•éªŒè¯è®¾ç½®æ­£ç¡®

### æ–¹æ³•1: æ£€æŸ¥ç”Ÿæˆçš„TCLæ–‡ä»¶

è¿è¡Œè„šæœ¬æ—¶,**ä¸è¦åˆ é™¤**ä¸´æ—¶TCLæ–‡ä»¶,æ£€æŸ¥å…¶å†…å®¹:

```bash
# ä¿®æ”¹run_all.sh,æ³¨é‡Šæ‰æ¸…ç†è¡Œ
# rm -f "$temp_file"  # æ³¨é‡Šæ‰è¿™è¡Œ

# è¿è¡Œåæ£€æŸ¥
cat renoCode_run1.tcl | head -30
```

åº”è¯¥çœ‹åˆ°:
```tcl
set ns [new Simulator]

# Random seed configuration - Run 1
set rng [new RNG]
$rng seed 18134
set defaultRNG $rng

# Additional RNG for packet drops
set rng2 [new RNG]
$rng2 seed 18245

# Set random seed for ns-random
ns-random 18134

...

$ns at 0.234567 "$myftp1 start"
$ns at 0.456789 "$myftp2 start"
```

### æ–¹æ³•2: æ£€æŸ¥è¿è¡Œæ—¥å¿—

è¿è¡Œæ—¶ä¼šæ˜¾ç¤º:
```
è¿è¡Œ reno - ç¬¬ 1 æ¬¡...
  éšæœºç§å­: 18134
  FTP1å¯åŠ¨æ—¶é—´æŠ–åŠ¨: 0.234 ç§’
  FTP2å¯åŠ¨æ—¶é—´æŠ–åŠ¨: 0.457 ç§’
  è¾“å‡ºæ–‡ä»¶: renoTrace_run1.tr
  âœ“ å®Œæˆ! æ–‡ä»¶å¤§å°: 245K

è¿è¡Œ reno - ç¬¬ 2 æ¬¡...
  éšæœºç§å­: 30479
  FTP1å¯åŠ¨æ—¶é—´æŠ–åŠ¨: 0.123 ç§’
  FTP2å¯åŠ¨æ—¶é—´æŠ–åŠ¨: 0.346 ç§’
  è¾“å‡ºæ–‡ä»¶: renoTrace_run2.tr
  âœ“ å®Œæˆ! æ–‡ä»¶å¤§å°: 248K
```

### æ–¹æ³•3: æ¯”è¾ƒtraceæ–‡ä»¶å‰å‡ è¡Œ

```bash
# æŸ¥çœ‹å‰10è¡Œ,åº”è¯¥çœ‹åˆ°ä¸åŒçš„äº‹ä»¶æ—¶é—´
head -10 renoTrace_run1.tr
head -10 renoTrace_run2.tr
```

### æ–¹æ³•4: æ£€æŸ¥æ–‡ä»¶å¤§å°

```bash
ls -lh renoTrace_run*.tr
```

å¦‚æœè®¾ç½®æ­£ç¡®,**æ–‡ä»¶å¤§å°åº”è¯¥ä¸åŒ**:
```
242K renoTrace_run1.tr
248K renoTrace_run2.tr
243K renoTrace_run3.tr
247K renoTrace_run4.tr
244K renoTrace_run5.tr
```

å¦‚æœæ‰€æœ‰æ–‡ä»¶å¤§å°**å®Œå…¨ç›¸åŒ**,è¯´æ˜éšæœºæ€§æ²¡æœ‰ç”Ÿæ•ˆã€‚

## ğŸ› ï¸ è°ƒè¯•æ­¥éª¤

### å¦‚æœç»“æœä»ç„¶ç›¸åŒ:

#### Step 1: ä¿ç•™ä¸´æ—¶TCLæ–‡ä»¶

ä¿®æ”¹ `run_all.sh`,æ³¨é‡Šæ‰æ¸…ç†è¡Œ:

```bash
# ç¬¬154è¡Œé™„è¿‘
ns "$temp_file"

# æ£€æŸ¥æ˜¯å¦æˆåŠŸ
if [ -f "$trace_output" ]; then
    ...
fi

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
# rm -f "$temp_file"  # <-- æ³¨é‡Šæ‰è¿™è¡Œ
```

#### Step 2: æ£€æŸ¥ç”Ÿæˆçš„TCLæ–‡ä»¶

```bash
./run_all.sh

# æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶
ls -la renoCode_run*.tcl

# æŸ¥çœ‹ç¬¬ä¸€ä¸ªæ–‡ä»¶
head -40 renoCode_run1.tcl | grep -A 15 "Simulator"

# æŸ¥çœ‹å¯åŠ¨æ—¶é—´
grep "myftp" renoCode_run1.tcl
```

#### Step 3: æ‰‹åŠ¨è¿è¡Œä¸€æ¬¡

```bash
# ç¼–è¾‘ renoCode.tcl,æ‰‹åŠ¨æ·»åŠ 
nano renoCode.tcl

# åœ¨ set ns [new Simulator] åæ·»åŠ :
set rng [new RNG]
$rng seed 99999
set defaultRNG $rng
ns-random 99999

# ä¿®æ”¹å¯åŠ¨æ—¶é—´
$ns at 0.3 "$myftp1 start"
$ns at 0.4 "$myftp2 start"

# è¿è¡Œ
ns renoCode.tcl
```

#### Step 4: å¯¹æ¯”ç»“æœ

```bash
# è¿è¡Œé»˜è®¤ç‰ˆæœ¬
ns renoCode.tcl
mv renoTrace.tr renoTrace_default.tr

# è¿è¡Œä¿®æ”¹ç‰ˆæœ¬
ns renoCode.tcl  # (å·²ä¿®æ”¹éšæœºç§å­)
mv renoTrace.tr renoTrace_modified.tr

# æ¯”è¾ƒå¤§å°
ls -lh renoTrace_*.tr

# æ¯”è¾ƒå†…å®¹
diff <(head -50 renoTrace_default.tr) <(head -50 renoTrace_modified.tr)
```

## ğŸ“Œ å…³é”®ç‚¹

### ä¸ºä»€ä¹ˆä½¿ç”¨3ç§éšæœºç§å­æ–¹æ³•?

1. **set defaultRNG** - æ§åˆ¶å…¨å±€éšæœºæ€§
2. **set rng2** - æ§åˆ¶ç‰¹å®šäº‹ä»¶(å¦‚åŒ…ä¸¢å¤±)
3. **ns-random** - å…¼å®¹æ—§ç‰ˆNS2

### ä¸ºä»€ä¹ˆä½¿ç”¨å¯åŠ¨æ—¶é—´æŠ–åŠ¨?

- ä¸åŒçš„å¯åŠ¨æ—¶é—´ â†’ ä¸åŒçš„åŒ…åˆ°è¾¾æ¨¡å¼
- ä¸åŒçš„åˆ°è¾¾æ¨¡å¼ â†’ ä¸åŒçš„é˜Ÿåˆ—çŠ¶æ€
- ä¸åŒçš„é˜Ÿåˆ—çŠ¶æ€ â†’ ä¸åŒçš„ä¸¢åŒ…å’Œååé‡

### æŠ–åŠ¨èŒƒå›´ä¸ºä»€ä¹ˆæ˜¯0-0.5ç§’?

- **å¤ªå°** (0-0.01ç§’): å½±å“å¯èƒ½ä¸æ˜æ˜¾
- **å¤ªå¤§** (0-5ç§’): æ”¹å˜äº†å®éªŒçš„åŸºæœ¬æ€§è´¨
- **0.5ç§’**: è¶³å¤Ÿäº§ç”Ÿå·®å¼‚,ä½†ä¸æ”¹å˜åŸºæœ¬åœºæ™¯

## âœ… é¢„æœŸæ•ˆæœ

æ­£ç¡®é…ç½®å,åº”è¯¥çœ‹åˆ°:

### ååé‡å˜åŒ–
```
Run 1: 238 Mbps
Run 2: 242 Mbps
Run 3: 235 Mbps
Run 4: 245 Mbps
Run 5: 240 Mbps

å˜åŒ–èŒƒå›´: Â±3-5% (çº¦10 Mbps)
```

### PLRå˜åŒ–
```
Run 1: 0.122%
Run 2: 0.135%
Run 3: 0.118%
Run 4: 0.140%
Run 5: 0.128%

å˜åŒ–èŒƒå›´: Â±10-15% ç›¸å¯¹å˜åŒ–
```

### ç»Ÿè®¡æ˜¾è‘—æ€§
- **æ ‡å‡†å·®**: åº”è¯¥ > 0 (å¦‚æœ=0è¯´æ˜æ²¡æœ‰å˜åŒ–)
- **95% CI**: åº”è¯¥å¯è§ (å¦‚æœå¤ªçª„è¯´æ˜å˜åŒ–ä¸å¤Ÿ)
- **CoV**: åº”è¯¥åœ¨ 0.02-0.05 èŒƒå›´

## ğŸ”„ å®Œæ•´è¿è¡Œæµç¨‹

```bash
cd ~/COMP3014J_Lab

# æ¸…ç†æ‰€æœ‰æ—§æ–‡ä»¶
rm -f renoTrace_run*.tr reno_run*.nam renoCode_run*.tcl

# è¿è¡Œå®Œæ•´è„šæœ¬
./run_all.sh

# æ£€æŸ¥è¾“å‡ºæ—¥å¿—ä¸­çš„:
# - éšæœºç§å­å€¼ä¸åŒ
# - æŠ–åŠ¨å€¼ä¸åŒ
# - æ–‡ä»¶å¤§å°ä¸åŒ

# æŸ¥çœ‹ç»“æœ
python3 analyser3.py
eog partC_reproducibility.png &
```

å¦‚æœä»ç„¶æ²¡æœ‰å˜åŒ–,å¯èƒ½æ˜¯NS2ç‰ˆæœ¬é—®é¢˜,å°è¯•ä½¿ç”¨Pythonè„šæœ¬:
```bash
python3 generate_runs.py
python3 analyser3.py
```

## ğŸ“ æŠ¥å‘Šä¸­çš„è¯´æ˜

```markdown
### å¯é‡å¤æ€§æµ‹è¯•æ–¹æ³•

ä¸ºç¡®ä¿5æ¬¡è¿è¡Œäº§ç”Ÿä¸åŒçš„ç»“æœ,æˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹éšæœºåŒ–ç­–ç•¥:

1. **éšæœºç§å­è®¾ç½®**: æ¯æ¬¡è¿è¡Œä½¿ç”¨ä¸åŒçš„éšæœºç§å­
   (18134, 30479, 42824, 55169, 67514)

2. **å¯åŠ¨æ—¶é—´æŠ–åŠ¨**: FTPæµçš„å¯åŠ¨æ—¶é—´æ·»åŠ 0-0.5ç§’çš„éšæœºå»¶è¿Ÿ,
   é¿å…å®Œå…¨åŒæ­¥å¯¼è‡´çš„ç¡®å®šæ€§è¡Œä¸º

3. **å¤šé‡RNGé…ç½®**: é…ç½®äº†defaultRNGã€rng2å’Œns-random,
   ç¡®ä¿æ‰€æœ‰éšæœºäº‹ä»¶éƒ½ä½¿ç”¨ä¸åŒçš„ç§å­

è¿™äº›æªæ–½ç¡®ä¿äº†5æ¬¡è¿è¡Œåœ¨ä¿æŒåœºæ™¯ä¸€è‡´æ€§çš„åŒæ—¶,
å±•ç°å‡ºç½‘ç»œç³»ç»Ÿçš„éšæœºæ€§å’Œå˜å¼‚æ€§ã€‚
```

