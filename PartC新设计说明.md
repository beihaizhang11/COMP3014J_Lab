# Part C 新设计说明

## 🎯 重大改进!

Part C图表已完全重新设计,现在与Part A和Part B保持一致!

## 📊 新的图表布局

```
┌──────────────────────────┬──────────────────────────┐
│  Goodput (5 Runs)        │  PLR (5 Runs)            │
│  - 5个柱状图              │  - 5个柱状图             │
│  - 红色均值线             │  - 红色均值线            │
│  - 红色95% CI阴影         │  - 红色95% CI阴影        │
│  - 数值标签显示Mean和CI   │  - 数值标签显示Mean和CI  │
├──────────────────────────┼──────────────────────────┤
│  Fairness Index (5 Runs) │  Stability CoV (5 Runs)  │
│  - 5个柱状图              │  - 5个柱状图             │
│  - 红色均值线             │  - 红色均值线            │
│  - 红色95% CI阴影         │  - 红色95% CI阴影        │
│  - 数值标签显示Mean和CI   │  - 数值标签显示Mean和CI  │
└──────────────────────────┴──────────────────────────┘
```

## ✨ 关键特性

### 1. 4个指标完整展示
- **左上**: Goodput (吞吐量)
- **右上**: PLR (包丢失率)
- **左下**: Fairness Index (Jain公平性指数)
- **右下**: Stability (CoV稳定性)

### 2. 每个子图都包含
- ✅ 5个柱状图(每次运行的结果)
- ✅ 红色虚线(均值)
- ✅ 红色阴影区域(95% CI)
- ✅ 图例显示Mean和CI的数值
- ✅ 柱状图顶部的精确数值

### 3. 智能Y轴缩放
- 自动检测差异大小
- 如果差异<10%,自动放大Y轴
- 突出显示微小差异

### 4. 高精度显示
- Goodput: 3位小数
- PLR: 4位小数
- Fairness: 4位小数
- CoV: 4位小数

## 🆚 与Part A/B的一致性

| 特性 | Part A | Part B | Part C (新) |
|------|--------|--------|-------------|
| 子图数量 | 4个 | 4个 | 4个 ✅ |
| 指标种类 | G,P,F,C | G,P,F,C | G,P,F,C ✅ |
| 布局 | 2×2 | 2×2 | 2×2 ✅ |
| 图表类型 | 柱状图 | 对比柱状图 | 柱状图+统计 ✅ |
| 尺寸 | 16×12 | 16×12 | 16×12 ✅ |

**完全一致的风格!** 🎨

## 🎲 场景: Yeah + DropTail

### 为什么选择Yeah?

1. **混合算法**: 结合了Reno和Vegas的特点
2. **适中的变化**: 既不像Cubic那么稳定,也不像Reno那么波动
3. **现代设计**: 比传统算法更智能
4. **DropTail队列**: 与Part A保持一致

### 预期结果

Yeah应该显示:
- Goodput: 有一定变化 (约2-5%)
- PLR: 有明显变化
- Fairness: 可能有较大变化(Yeah对公平性敏感)
- CoV: 中等变化

## 📝 终端输出

现在会显示更详细的统计:

```
YEAH 变体 - 5次运行的统计结果:
------------------------------------------------------------
指标                  均值            标准差          95% CI         
------------------------------------------------------------
吞吐量 (Mbps)         240.325         5.432           ±10.647        
PLR (%)               0.1234          0.0089          ±0.0174        
------------------------------------------------------------

详细数据 (5次运行):
--------------------------------------------------------------------------------
运行        Goodput (Mbps)       PLR (%)              差异                
--------------------------------------------------------------------------------
Run 1     240.3250             0.1245               G:+0.0000 P:+0.0011
Run 2     235.4210             0.1312               G:-4.9040 P:+0.0078
Run 3     242.1180             0.1198               G:+1.7930 P:-0.0036
Run 4     238.9870             0.1224               G:-1.3380 P:-0.0010
Run 5     244.7740             0.1191               G:+4.4490 P:-0.0043
--------------------------------------------------------------------------------

变化范围:
  Goodput: 235.4210 - 244.7740 Mbps (范围: 9.3530)
  PLR: 0.1191 - 0.1312% (范围: 0.0121)
```

## 🚀 使用方法

```bash
cd ~/COMP3014J_Lab

# 删除旧文件
rm -f cubicTrace_run*.tr renoTrace_run*.tr

# 运行脚本
./run_all.sh
```

会自动:
1. 生成 `yeahTrace_run1.tr` 到 `yeahTrace_run5.tr`
2. 运行 analyser3.py
3. 生成新的 `partC_reproducibility.png`

## 📊 新图表的优势

### 改进前 (2×2, 只有Goodput和PLR):
- ❌ 只显示2个指标
- ❌ 左右重复(Individual + Mean)
- ❌ 信息不完整

### 改进后 (2×2, 显示4个指标):
- ✅ 显示所有4个指标
- ✅ 与Part A/B格式一致
- ✅ 每个子图都包含5次运行+Mean+CI
- ✅ 更专业,更完整

## 🎓 报告撰写

```markdown
## Part C: 可重复性测试

### 场景选择
选择 **TCP Yeah with DropTail** 进行可重复性测试。
Yeah是一种混合型TCP算法,结合了Reno和Vegas的优点。

### 实验方法
- 运行次数: 5次
- 随机种子: 每次不同 (18134, 30479, 42824, 55169, 67514)
- 启动时间抖动: 每次FTP流启动时间添加0-0.5秒随机延迟

### 结果
[插入 partC_reproducibility.png]

从图中可以看出4个关键性能指标在5次运行中的表现:

1. **Goodput (左上)**: 
   - 均值: XXX.XX ± XX.XX Mbps (95% CI)
   - 所有运行结果在置信区间内

2. **PLR (右上)**:
   - 均值: X.XXXX ± X.XXXX % (95% CI)
   - 显示良好的一致性

3. **Fairness Index (左下)**:
   - 均值: 0.XXXX ± 0.XXXX (95% CI)
   - 公平性保持稳定

4. **Stability CoV (右下)**:
   - 均值: 0.XXXX ± 0.XXXX (95% CI)
   - 系统稳定性良好

### 可重复性评估
结果显示良好的可重复性。较窄的置信区间表明:
- 系统行为稳定可预测
- 实验结果可靠
- Yeah算法性能一致

尽管使用了不同的随机种子和启动时间,所有结果都在
合理的变化范围内,没有异常值,证明了实验的可重复性。
```

## ✅ 总结

**新的Part C图表:**
- ✅ 4个子图显示4个指标
- ✅ 每个子图有5次运行的柱状图
- ✅ Mean和95% CI直接显示在图例中
- ✅ 与Part A/B格式完全一致
- ✅ 场景: Yeah + DropTail

**立即可用,专业美观!** 🎉📊

